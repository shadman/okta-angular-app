{"version":3,"file":"RecoveryLoadingController.js","sources":["../../../../../src/v1/controllers/RecoveryLoadingController.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport FormController from 'v1/util/FormController';\nexport default FormController.extend({\n  className: 'recovery-loading',\n\n  Model: {},\n  Form: {\n    noButtonBar: true,\n  },\n\n  initialize: function(options) {\n    const self = this;\n    const factorEnroll = this.options.settings.get('features.multiOptionalFactorEnroll');\n\n    return this.model\n      .startTransaction(function(authClient) {\n        return authClient.verifyRecoveryToken({\n          recoveryToken: options.token,\n          ...(factorEnroll && { multiOptionalFactorEnroll: factorEnroll })\n        });\n      })\n      .catch(function() {\n        self.options.appState.trigger('loading', false);\n        self.options.appState.trigger('removeLoading');\n      });\n  },\n\n  preRender: function() {\n    this.options.appState.trigger('loading', true);\n  },\n\n  trapAuthResponse: function() {\n    this.options.appState.trigger('loading', false);\n    return false;\n  },\n});\n"],"names":["FormController","extend","className","Model","Form","noButtonBar","initialize","options","self","factorEnroll","settings","get","model","startTransaction","authClient","verifyRecoveryToken","recoveryToken","token","multiOptionalFactorEnroll","catch","appState","trigger","preRender","trapAuthResponse"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,gCAAeA,cAAc,CAACC,MAAM,CAAC;AACnCC,EAAAA,SAAS,EAAE,kBAAkB;EAE7BC,KAAK,EAAE,EAAE;AACTC,EAAAA,IAAI,EAAE;AACJC,IAAAA,WAAW,EAAE,IAAA;GACd;EAEDC,UAAU,EAAE,UAASC,OAAO,EAAE;IAC5B,MAAMC,IAAI,GAAG,IAAI,CAAA;IACjB,MAAMC,YAAY,GAAG,IAAI,CAACF,OAAO,CAACG,QAAQ,CAACC,GAAG,CAAC,oCAAoC,CAAC,CAAA;IAEpF,OAAO,IAAI,CAACC,KAAK,CACdC,gBAAgB,CAAC,UAASC,UAAU,EAAE;MACrC,OAAOA,UAAU,CAACC,mBAAmB,CAAC;QACpCC,aAAa,EAAET,OAAO,CAACU,KAAK;AAC5B,QAAA,IAAIR,YAAY,IAAI;AAAES,UAAAA,yBAAyB,EAAET,YAAAA;SAAc,CAAA;AACjE,OAAC,CAAC,CAAA;AACJ,KAAC,CAAC,CACDU,KAAK,CAAC,YAAW;MAChBX,IAAI,CAACD,OAAO,CAACa,QAAQ,CAACC,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA;MAC/Cb,IAAI,CAACD,OAAO,CAACa,QAAQ,CAACC,OAAO,CAAC,eAAe,CAAC,CAAA;AAChD,KAAC,CAAC,CAAA;GACL;AAEDC,EAAAA,SAAS,EAAE,YAAW;IACpB,IAAI,CAACf,OAAO,CAACa,QAAQ,CAACC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAA;GAC/C;AAEDE,EAAAA,gBAAgB,EAAE,YAAW;IAC3B,IAAI,CAAChB,OAAO,CAACa,QAAQ,CAACC,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA;AAC/C,IAAA,OAAO,KAAK,CAAA;AACd,GAAA;AACF,CAAC,CAAC;;;;"}